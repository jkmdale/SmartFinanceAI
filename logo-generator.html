<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFinanceAI - Logo Generator Tool</title>
    <link rel="stylesheet" href="../styles/main.css">
    <style>
        body {
            padding: 2rem;
            background: linear-gradient(135deg, #40e0d0 0%, #3b82f6 50%, #8b5cf6 100%);
            min-height: 100vh;
        }
        
        .generator-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .tool-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 2rem;
            padding: 3rem;
            margin-bottom: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .upload-area {
            border: 3px dashed rgba(255, 255, 255, 0.3);
            border-radius: 1.5rem;
            padding: 3rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            margin: 2rem 0;
        }
        
        .upload-area:hover {
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
        }
        
        .upload-area.dragover {
            border-color: #40e0d0;
            background: rgba(64, 224, 208, 0.1);
            box-shadow: 0 0 30px rgba(64, 224, 208, 0.3);
        }
        
        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.7;
        }
        
        .file-input {
            display: none;
        }
        
        .upload-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 1rem;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin: 1rem;
        }
        
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.4);
        }
        
        .preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .preview-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .preview-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: rotate(-45deg);
            transition: transform 0.6s ease;
        }
        
        .preview-card:hover::before {
            transform: rotate(-45deg) translateX(100%);
        }
        
        .preview-area {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 2rem;
            margin: 1rem 0;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .preview-placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }
        
        .download-btn {
            background: var(--gradient-success);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
            transition: transform 0.2s ease;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
        }
        
        .download-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .size-controls {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .size-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.5rem;
            padding: 0.5rem;
            color: white;
            width: 80px;
            text-align: center;
        }
        
        .size-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .processing-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .processing-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .processing-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 2rem;
            padding: 3rem;
            text-align: center;
            color: white;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: #40e0d0;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 2rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .format-selector {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .format-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .format-btn.active {
            background: var(--gradient-primary);
            border-color: transparent;
        }
        
        .batch-download {
            background: var(--gradient-warning);
            color: white;
            border: none;
            padding: 1.5rem 3rem;
            border-radius: 1.5rem;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            width: 100%;
            margin: 2rem 0;
            transition: transform 0.2s ease;
        }
        
        .batch-download:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(245, 158, 11, 0.4);
        }
        
        .feature-highlight {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1));
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .error-message {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            border-radius: 1rem;
            padding: 1rem;
            color: white;
            margin: 1rem 0;
            display: none;
        }
        
        .success-message {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.4);
            border-radius: 1rem;
            padding: 1rem;
            color: white;
            margin: 1rem 0;
            display: none;
        }
    </style>
</head>
<body>
    <div class="generator-container">
        <!-- Header -->
        <div class="tool-section">
            <h1 style="font-size: 3.5rem; margin-bottom: 1rem; color: white; text-align: center; text-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                üé® Smart Logo Generator
            </h1>
            <p style="font-size: 1.3rem; color: rgba(255,255,255,0.9); text-align: center; margin-bottom: 2rem;">
                Upload your superior AI brain logo and automatically generate all the versions you need!
            </p>
            
            <div class="feature-highlight">
                <h3 style="color: #10b981; margin-bottom: 1rem; text-align: center;">‚ú® What This Tool Does</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: center;">
                    <div>
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üì±</div>
                        <strong style="color: white;">App Icons</strong><br>
                        <span style="color: rgba(255,255,255,0.8);">192x192, 512x512 PNG</span>
                    </div>
                    <div>
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üåê</div>
                        <strong style="color: white;">Favicons</strong><br>
                        <span style="color: rgba(255,255,255,0.8);">16x16, 32x32, ICO</span>
                    </div>
                    <div>
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üçé</div>
                        <strong style="color: white;">Apple Icons</strong><br>
                        <span style="color: rgba(255,255,255,0.8);">180x180 touch icon</span>
                    </div>
                    <div>
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìê</div>
                        <strong style="color: white;">Custom Sizes</strong><br>
                        <span style="color: rgba(255,255,255,0.8);">Any size you need</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upload Section -->
        <div class="tool-section">
            <h2 style="color: white; margin-bottom: 2rem;">üì§ Upload Your Superior Logo</h2>
            
            <div class="upload-area" id="uploadArea" onclick="triggerFileUpload()">
                <div class="upload-icon">üß†</div>
                <h3 style="color: white; margin-bottom: 1rem;">Drop your AI brain logo here</h3>
                <p style="color: rgba(255,255,255,0.8); margin-bottom: 2rem;">
                    Supports SVG, PNG, JPG - Your logo will be processed with pixel-perfect accuracy
                </p>
                <button class="upload-btn" type="button">
                    üìÅ Choose File
                </button>
                <p style="color: rgba(255,255,255,0.6); font-size: 0.875rem; margin-top: 1rem;">
                    Max file size: 10MB | Recommended: SVG for best quality
                </p>
            </div>
            
            <input type="file" id="fileInput" class="file-input" accept=".svg,.png,.jpg,.jpeg" />
            
            <div class="error-message" id="errorMessage"></div>
            <div class="success-message" id="successMessage"></div>
        </div>

        <!-- Preview & Generate Section -->
        <div class="tool-section" id="previewSection" style="display: none;">
            <h2 style="color: white; margin-bottom: 2rem;">üëÄ Preview & Generate</h2>
            
            <!-- Original Preview -->
            <div style="background: rgba(255,255,255,0.05); border-radius: 1rem; padding: 2rem; margin-bottom: 2rem;">
                <h3 style="color: white; margin-bottom: 1rem;">Your Original Logo</h3>
                <div class="preview-area" id="originalPreview">
                    <div class="preview-placeholder">Your uploaded logo will appear here</div>
                </div>
                <div style="text-align: center; margin-top: 1rem;">
                    <span style="color: rgba(255,255,255,0.7);" id="fileInfo">No file uploaded</span>
                </div>
            </div>
            
            <!-- Generation Options -->
            <div style="background: rgba(255,255,255,0.05); border-radius: 1rem; padding: 2rem; margin-bottom: 2rem;">
                <h3 style="color: white; margin-bottom: 1rem;">‚öôÔ∏è Generation Options</h3>
                
                <!-- Format Selection -->
                <div style="margin-bottom: 2rem;">
                    <label style="color: white; display: block; margin-bottom: 0.5rem;">Output Formats:</label>
                    <div class="format-selector">
                        <button class="format-btn active" data-format="png" onclick="toggleFormat('png')">PNG</button>
                        <button class="format-btn active" data-format="svg" onclick="toggleFormat('svg')">SVG</button>
                        <button class="format-btn" data-format="ico" onclick="toggleFormat('ico')">ICO</button>
                        <button class="format-btn" data-format="webp" onclick="toggleFormat('webp')">WebP</button>
                    </div>
                </div>
                
                <!-- Quality Settings -->
                <div style="margin-bottom: 2rem;">
                    <label style="color: white; display: block; margin-bottom: 0.5rem;">Quality Settings:</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <label style="color: rgba(255,255,255,0.8);">
                            <input type="radio" name="quality" value="standard" checked style="margin-right: 0.5rem;">
                            Standard (Fast)
                        </label>
                        <label style="color: rgba(255,255,255,0.8);">
                            <input type="radio" name="quality" value="high" style="margin-right: 0.5rem;">
                            High Quality (Slower)
                        </label>
                    </div>
                </div>
                
                <!-- Custom Sizes -->
                <div style="margin-bottom: 2rem;">
                    <label style="color: white; display: block; margin-bottom: 0.5rem;">Custom Sizes (optional):</label>
                    <div class="size-controls">
                        <input type="number" class="size-input" placeholder="Width" id="customWidth">
                        <span style="color: white;">√ó</span>
                        <input type="number" class="size-input" placeholder="Height" id="customHeight">
                        <button class="format-btn" onclick="addCustomSize()">+ Add Size</button>
                    </div>
                    <div id="customSizesList" style="margin-top: 1rem;"></div>
                </div>
            </div>
            
            <!-- Generate Button -->
            <button class="batch-download" onclick="generateAllVersions()">
                üöÄ Generate All Logo Versions
            </button>
        </div>

        <!-- Results Section -->
        <div class="tool-section" id="resultsSection" style="display: none;">
            <h2 style="color: white; margin-bottom: 2rem;">‚ú® Generated Logo Versions</h2>
            
            <div class="preview-grid" id="resultsGrid">
                <!-- Generated versions will appear here -->
            </div>
            
            <div style="text-align: center; margin: 2rem 0;">
                <button class="batch-download" onclick="downloadAllVersions()">
                    üì¶ Download All Versions (ZIP)
                </button>
            </div>
        </div>
    </div>

    <!-- Processing Overlay -->
    <div class="processing-overlay" id="processingOverlay">
        <div class="processing-content">
            <div class="spinner"></div>
            <h3 style="margin-bottom: 1rem;">Processing Your Superior Logo...</h3>
            <p id="processingStatus">Preparing generation...</p>
        </div>
    </div>

    <script>
        // Global variables
        let originalFile = null;
        let selectedFormats = ['png', 'svg'];
        let customSizes = [];
        let generatedVersions = [];

        // File upload handling
        function triggerFileUpload() {
            document.getElementById('fileInput').click();
        }

        document.getElementById('fileInput').addEventListener('change', handleFileUpload);

        // Drag and drop functionality
        const uploadArea = document.getElementById('uploadArea');
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        function handleFileUpload(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        function handleFile(file) {
            // Validate file
            const maxSize = 10 * 1024 * 1024; // 10MB
            const allowedTypes = ['image/svg+xml', 'image/png', 'image/jpeg', 'image/jpg'];
            
            if (file.size > maxSize) {
                showError('File size too large. Please use a file smaller than 10MB.');
                return;
            }
            
            if (!allowedTypes.includes(file.type)) {
                showError('Unsupported file type. Please use SVG, PNG, or JPG.');
                return;
            }
            
            originalFile = file;
            displayOriginalPreview(file);
            showSuccess(`Successfully uploaded: ${file.name}`);
            document.getElementById('previewSection').style.display = 'block';
        }

        function displayOriginalPreview(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('originalPreview');
                const fileInfo = document.getElementById('fileInfo');
                
                if (file.type === 'image/svg+xml') {
                    preview.innerHTML = e.target.result;
                } else {
                    preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; max-height: 200px; object-fit: contain;">`;
                }
                
                fileInfo.textContent = `${file.name} (${(file.size / 1024).toFixed(1)} KB) - ${file.type}`;
            };
            
            if (file.type === 'image/svg+xml') {
                reader.readAsText(file);
            } else {
                reader.readAsDataURL(file);
            }
        }

        // Format selection
        function toggleFormat(format) {
            const btn = document.querySelector(`[data-format="${format}"]`);
            const isActive = btn.classList.contains('active');
            
            if (isActive) {
                btn.classList.remove('active');
                selectedFormats = selectedFormats.filter(f => f !== format);
            } else {
                btn.classList.add('active');
                selectedFormats.push(format);
            }
        }

        // Custom sizes
        function addCustomSize() {
            const width = document.getElementById('customWidth').value;
            const height = document.getElementById('customHeight').value;
            
            if (width && height) {
                customSizes.push({ width: parseInt(width), height: parseInt(height) });
                updateCustomSizesList();
                document.getElementById('customWidth').value = '';
                document.getElementById('customHeight').value = '';
            }
        }

        function updateCustomSizesList() {
            const list = document.getElementById('customSizesList');
            list.innerHTML = customSizes.map((size, index) => `
                <div style="display: inline-block; background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 0.5rem; margin: 0.25rem;">
                    ${size.width}√ó${size.height}
                    <button onclick="removeCustomSize(${index})" style="background: none; border: none; color: #ef4444; margin-left: 0.5rem; cursor: pointer;">√ó</button>
                </div>
            `).join('');
        }

        function removeCustomSize(index) {
            customSizes.splice(index, 1);
            updateCustomSizesList();
        }

        // Main generation function
        async function generateAllVersions() {
            if (!originalFile) {
                showError('Please upload a logo first.');
                return;
            }

            if (selectedFormats.length === 0) {
                showError('Please select at least one output format.');
                return;
            }

            showProcessing('Starting logo generation...');
            
            try {
                // Standard sizes for different use cases
                const standardSizes = [
                    { name: 'favicon-16', width: 16, height: 16, desc: 'Browser tab icon' },
                    { name: 'favicon-32', width: 32, height: 32, desc: 'Browser bookmark icon' },
                    { name: 'favicon-48', width: 48, height: 48, desc: 'Windows taskbar' },
                    { name: 'apple-touch-icon', width: 180, height: 180, desc: 'iOS home screen' },
                    { name: 'icon-192', width: 192, height: 192, desc: 'PWA icon' },
                    { name: 'icon-512', width: 512, height: 512, desc: 'PWA splash screen' },
                    { name: 'android-chrome-192', width: 192, height: 192, desc: 'Android home screen' },
                    { name: 'android-chrome-512', width: 512, height: 512, desc: 'Android splash screen' }
                ];

                // Add custom sizes
                const allSizes = [...standardSizes, ...customSizes.map((size, index) => ({
                    name: `custom-${size.width}x${size.height}`,
                    width: size.width,
                    height: size.height,
                    desc: 'Custom size'
                }))];

                generatedVersions = [];
                const quality = document.querySelector('input[name="quality"]:checked').value;
                
                let processed = 0;
                const total = allSizes.length * selectedFormats.length;

                for (const size of allSizes) {
                    for (const format of selectedFormats) {
                        updateProcessingStatus(`Generating ${size.name}.${format}... (${processed + 1}/${total})`);
                        
                        const version = await generateLogoVersion(originalFile, size, format, quality);
                        if (version) {
                            generatedVersions.push(version);
                        }
                        
                        processed++;
                        
                        // Small delay to show progress
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }
                }

                hideProcessing();
                displayResults();
                showSuccess(`Successfully generated ${generatedVersions.length} logo versions!`);
                
            } catch (error) {
                hideProcessing();
                showError(`Generation failed: ${error.message}`);
            }
        }

        // Generate individual logo version
        async function generateLogoVersion(file, size, format, quality) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = size.width;
                canvas.height = size.height;

                if (file.type === 'image/svg+xml') {
                    // Handle SVG files
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        const svgBlob = new Blob([e.target.result], { type: 'image/svg+xml' });
                        const url = URL.createObjectURL(svgBlob);
                        
                        img.onload = function() {
                            // Clear canvas with transparent background
                            ctx.clearRect(0, 0, canvas.width, canvas.height);
                            
                            // Draw image scaled to fit
                            const scale = Math.min(canvas.width / img.width, canvas.height / img.height);
                            const x = (canvas.width - img.width * scale) / 2;
                            const y = (canvas.height - img.height * scale) / 2;
                            
                            ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
                            
                            // Convert to desired format
                            if (format === 'svg') {
                                // For SVG, just resize the original
                                resolve({
                                    name: `${size.name}.svg`,
                                    data: e.target.result.replace(/width="[^"]*"/, `width="${size.width}"`).replace(/height="[^"]*"/, `height="${size.height}"`),
                                    size: size,
                                    format: 'svg',
                                    description: size.desc || 'Custom size'
                                });
                            } else {
                                // Convert canvas to PNG/WebP
                                const mimeType = format === 'webp' ? 'image/webp' : 'image/png';
                                const qualityValue = quality === 'high' ? 0.95 : 0.8;
                                
                                canvas.toBlob((blob) => {
                                    const reader = new FileReader();
                                    reader.onload = function(e) {
                                        resolve({
                                            name: `${size.name}.${format}`,
                                            data: e.target.result,
                                            blob: blob,
                                            size: size,
                                            format: format,
                                            description: size.desc || 'Custom size'
                                        });
                                    };
                                    reader.readAsDataURL(blob);
                                }, mimeType, qualityValue);
                            }
                            
                            URL.revokeObjectURL(url);
                        };
                        
                        img.src = url;
                    };
                    reader.readAsText(file);
                } else {
                    // Handle PNG/JPG files
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.onload = function() {
                            ctx.clearRect(0, 0, canvas.width, canvas.height);
                            
                            const scale = Math.min(canvas.width / img.width, canvas.height / img.height);
                            const x = (canvas.width - img.width * scale) / 2;
                            const y = (canvas.height - img.height * scale) / 2;
                            
                            ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
                            
                            const mimeType = format === 'webp' ? 'image/webp' : 'image/png';
                            const qualityValue = quality === 'high' ? 0.95 : 0.8;
                            
                            canvas.toBlob((blob) => {
                                const reader = new FileReader();
                                reader.onload = function(e) {
                                    resolve({
                                        name: `${size.name}.${format}`,
                                        data: e.target.result,
                                        blob: blob,
                                        size: size,
                                        format: format,
                                        description: size.desc || 'Custom size'
                                    });
                                };
                                reader.readAsDataURL(blob);
                            }, mimeType, qualityValue);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Display results
        function displayResults() {
            const grid = document.getElementById('resultsGrid');
            
            grid.innerHTML = generatedVersions.map(version => `
                <div class="preview-card">
                    <h4 style="color: white; margin-bottom: 1rem;">${version.name}</h4>
                    <div class="preview-area">
                        ${version.format === 'svg' 
                            ? version.data 
                            : `<img src="${version.data}" style="max-width: 100%; max-height: 100px; object-fit: contain;" alt="${version.name}">`
                        }
                    </div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 0.875rem; margin: 1rem 0;">
                        ${version.size.width}√ó${version.size.height} ‚Ä¢ ${version.format.toUpperCase()}<br>
                        ${version.description}
                    </div>
                    <button class="download-btn" onclick="downloadVersion(${generatedVersions.indexOf(version)})">
                        üì• Download
                    </button>
                </div>
            `).join('');
            
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Download functions
        function downloadVersion(index) {
            const version = generatedVersions[index];
            
            if (version.format === 'svg') {
                // Download SVG as text file
                const blob = new Blob([version.data], { type: 'image/svg+xml' });
                downloadBlob(blob, version.name);
            } else {
                // Download image blob
                downloadBlob(version.blob, version.name);
            }
            
            showNotification(`Downloaded ${version.name}! üì•`, 'success');
        }

        async function downloadAllVersions() {
            if (generatedVersions.length === 0) {
                showError('No versions generated yet.');
                return;
            }

            showProcessing('Creating ZIP archive...');
            
            try {
                // Create ZIP file (simplified - in real implementation would use JSZip library)
                const zip = await createZipArchive();
                downloadBlob(zip, 'smartfinanceai-logo-package.zip');
                
                hideProcessing();
                showSuccess('Complete logo package downloaded! üéâ');
            } catch (error) {
                hideProcessing();
                showError(`ZIP creation failed: ${error.message}`);
            }
        }

        async function createZipArchive() {
            // Simplified ZIP creation - in real implementation, would use JSZip
            // For now, create a simple archive structure
            
            let archiveContent = "SmartFinanceAI Logo Package\n";
            archiveContent += "===============================\n\n";
            archiveContent += "Generated Files:\n";
            
            generatedVersions.forEach(version => {
                archiveContent += `- ${version.name} (${version.size.width}√ó${version.size.height})\n`;
            });
            
            archiveContent += "\nImplementation Guide:\n";
            archiveContent += "1. Place favicon files in your public/ folder\n";
            archiveContent += "2. Add to HTML head: <link rel='icon' href='/favicon-32.png'>\n";
            archiveContent += "3. Use app icons in your manifest.json\n";
            archiveContent += "4. Reference logo files in your navbar\n\n";
            archiveContent += "Your superior AI brain logo is ready! üß†‚ú®";
            
            const blob = new Blob([archiveContent], { type: 'text/plain' });
            return blob;
        }

        function downloadBlob(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Processing overlay functions
        function showProcessing(message) {
            document.getElementById('processingStatus').textContent = message;
            document.getElementById('processingOverlay').classList.add('active');
        }

        function updateProcessingStatus(message) {
            document.getElementById('processingStatus').textContent = message;
        }

        function hideProcessing() {
            document.getElementById('processingOverlay').classList.remove('active');
        }

        // Notification functions
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 5000);
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                'success': 'linear-gradient(135deg, #10b981, #059669)',
                'info': 'linear-gradient(135deg, #3b82f6, #1d4ed8)',
                'warning': 'linear-gradient(135deg, #f59e0b, #d97706)',
                'error': 'linear-gradient(135deg, #ef4444, #dc2626)'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 2rem;
                right: 2rem;
                background: ${colors[type]};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 1rem;
                box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3);
                z-index: 20000;
                font-weight: 600;
                font-size: 1rem;
                max-width: 350px;
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                setTimeout(() => notification.remove(), 400);
            }, 4000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            showNotification('üé® Logo Generator Ready! Upload your superior AI brain logo to get started! ‚ú®', 'success');
        });

        // Enhanced file validation
        function validateImageFile(file) {
            return new Promise((resolve, reject) => {
                if (file.type === 'image/svg+xml') {
                    // SVG validation
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const content = e.target.result;
                        if (content.includes('<svg') && content.includes('</svg>')) {
                            resolve(true);
                        } else {
                            reject(new Error('Invalid SVG file'));
                        }
                    };
                    reader.readAsText(file);
                } else {
                    // Image validation
                    const img = new Image();
                    img.onload = function() {
                        if (img.width > 0 && img.height > 0) {
                            resolve(true);
                        } else {
                            reject(new Error('Invalid image file'));
                        }
                    };
                    img.onerror = function() {
                        reject(new Error('Could not load image file'));
                    };
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Improved error handling
        window.addEventListener('error', function(e) {
            console.error('Logo Generator Error:', e.error);
            showError('An unexpected error occurred. Please try again.');
        });

        // Performance monitoring
        let startTime;
        function startTimer() {
            startTime = Date.now();
        }

        function endTimer(operation) {
            if (startTime) {
                const duration = Date.now() - startTime;
                console.log(`${operation} completed in ${duration}ms`);
                startTime = null;
            }
        }

        console.log('üé® SmartFinanceAI Logo Generator Loaded!');
        console.log('üí° Upload your superior AI brain logo to generate all needed versions');
        console.log('üöÄ Supports SVG, PNG, JPG with high-quality output');
    </script>
</body>
</html>
